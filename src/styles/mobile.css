/* Mobile and portrait/landscape responsive optimizations */
@media (max-width: 768px) {
  /* Ensure game canvas fits mobile screens perfectly */
  .game-container {
    height: 100vh;
    width: 100vw;
    max-height: 100vh;
    max-width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
    /* Safe area insets */
    padding-top: env(safe-area-inset-top, 0);
    padding-bottom: env(safe-area-inset-bottom, 0);
    padding-left: env(safe-area-inset-left, 0);
    padding-right: env(safe-area-inset-right, 0);
    box-sizing: border-box;
  }
  .game-area {
    width: 100vw;
    max-width: 100vw;
    height: calc(90vh - env(safe-area-inset-top, 0) - env(safe-area-inset-bottom, 0));
    max-height: calc(100vh - 32px - env(safe-area-inset-top, 0) - env(safe-area-inset-bottom, 0));
    margin: 0 auto;
    position: fixed;
    top: env(safe-area-inset-top, 0);
    left: 0;
    right: 0;
    padding-left: max(12px, env(safe-area-inset-left, 0));
    padding-right: max(12px, env(safe-area-inset-right, 0));
    box-sizing: border-box;
    background: inherit;
  }
  button {
    min-height: 48px;
    min-width: 48px;
  }
  input, select, textarea {
    font-size: 16px;
  }
  .absolute.top-4.left-4 {
    top: 2vh;
    left: 2vw;
    font-size: 3vw;
    max-font-size: 1rem;
  }
  .absolute.top-4.right-4 {
    top: 2vh;
    right: 2vw;
    font-size: 3vw;
    max-font-size: 1rem;
    z-index: 55;
  }
  .shop-btn-fixed {
    top: 76px !important; /* override risky top */
    right: 2vw !important;
    z-index: 60;
  }
  .lives-container {
    font-size: 4vw;
  }
  .score-container {
    font-size: 3.5vw;
  }
  .touch-controls {
    bottom: 4vh;
    left: 4vw;
    right: 4vw;
  }
  .game-instructions {
    font-size: 2.5vw;
    padding: 1vh 2vw;
  }
}

@media (max-height: 500px) and (orientation: landscape) {
  .absolute.top-4 {
    top: 1vh;
  }
  .absolute.bottom-4 {
    bottom: 1vh;
  }
  .absolute.top-4.left-4,
  .absolute.top-4.right-4 {
    font-size: 2vh;
  }
  .lives-container,
  .score-container {
    font-size: 2.5vh;
  }
}

@media (max-width: 480px) and (orientation: portrait) {
  .game-area {
    width: 100vw;
    height: calc(85vh - env(safe-area-inset-top, 0) - env(safe-area-inset-bottom, 0));
    max-height: calc(98vh - 56px - env(safe-area-inset-top, 0) - env(safe-area-inset-bottom, 0));
    padding-bottom: max(24px, env(safe-area-inset-bottom, 0));
    padding-top: max(12px, env(safe-area-inset-top, 0));
    padding-left: max(16px, env(safe-area-inset-left, 0));
    padding-right: max(16px, env(safe-area-inset-right, 0));
    box-sizing: border-box;
    background: inherit;
    margin: 0 auto;
  }
  .text-lg {
    font-size: 4vw;
  }
  .text-2xl {
    font-size: 6vw;
  }
  body {
    overflow-x: hidden;
  }
  .game-area {
    height: 100vh;
    width: 100vw;
    position: fixed;
    top: 0;
    left: 0;
  }
}

@media (max-width: 320px) {
  .absolute.top-4.left-4,
  .absolute.top-4.right-4 {
    font-size: 3vw;
    padding: 1vh 1vw;
  }
  .text-xs {
    font-size: 2.5vw;
  }
  button {
    min-height: 44px;
    min-width: 44px;
  }
}

@media (min-width: 1920px) {
  .game-element {
    transform: scale(1.2);
  }
}

/* Safe area handling for notches */
@supports (padding-top: env(safe-area-inset-top)) {
  .game-ui-top {
    padding-top: max(2vh, env(safe-area-inset-top));
  }
  .game-ui-bottom {
    padding-bottom: max(2vh, env(safe-area-inset-bottom));
  }
}
